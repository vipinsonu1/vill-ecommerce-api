"use strict";
var RemoteException = require("../exception/Exception");
var StackTraceElement = require("../exception/StackTraceElement");
var ExceptionCodec = (function () {
    function ExceptionCodec() {
    }
    ExceptionCodec.decodeResponse = function (clientMessage) {
        var exception = new RemoteException();
        exception.errorCode = clientMessage.readInt32();
        exception.className = clientMessage.readString();
        var isMessageNull = clientMessage.readBoolean();
        if (!isMessageNull) {
            exception.message = clientMessage.readString();
        }
        var stackTraceDepth = clientMessage.readInt32();
        exception.stackTrace = [];
        for (var i = 0; i < stackTraceDepth; i++) {
            exception.stackTrace.push(this.decodeStackTraceElement(clientMessage));
        }
        exception.causeErrorCode = clientMessage.readInt32();
        var causeClassNameNull = clientMessage.readBoolean();
        if (!causeClassNameNull) {
            exception.causeClassName = clientMessage.readString();
        }
        return exception;
    };
    ExceptionCodec.decodeStackTraceElement = function (payload) {
        var stackTraceElement = new StackTraceElement();
        stackTraceElement.declaringClass = payload.readString();
        stackTraceElement.methodName = payload.readString();
        var fileNameNull = payload.readBoolean();
        if (!fileNameNull) {
            stackTraceElement.fileName = payload.readString();
        }
        stackTraceElement.lineNumber = payload.readInt32();
        return stackTraceElement;
    };
    return ExceptionCodec;
}());
module.exports = ExceptionCodec;
//# sourceMappingURL=ExceptionCodec.js.map